# PDFレポートデザインガイド

このドキュメントでは、`survey_analysis_mvp` モジュールで生成するPDFレポートの
基本レイアウト方針をまとめています。既存のテンプレートとフォント資産を活用しつつ、
グラフがA4用紙に収まるよう調整する際の目安を示します。

## 1. 用紙サイズ
- **A4縦** (210mm × 297mm)。`fpdf2`では`pdf.add_page()`でデフォルトのA4サイズが
  使用されます。
- マージンはテンプレート側で20mm程度を想定しています。

## 2. フォント
- `fonts/` フォルダに配置している `NotoSansJP-*.ttf` を利用します。
- レポート内のテキストは以下を基準とします。
  - 見出し: 16pt (`<h2>` 等)
  - 本文: 12pt
- `report_template.html` では `@font-face` で `NotoSansJP` を読み込み済みです。

## 3. グラフのサイズ
- Matplotlibで生成するグラフは、横幅をA4の印字領域に合わせて
  `figsize=(8.0, 4.5)` 程度に設定します。
- `plt.savefig(..., bbox_inches="tight")` を使用して余白を抑えます。
- 生成した画像は `<img>` タグの `max-width: 90%` で表示しているため、
  ページからはみ出さないようになっています。

## 4. テンプレート編集箇所
- HTMLテンプレートは `report_template.html` です。
- ロゴやタイトルを追加する場合はテンプレートに直接追記してください。
- グラフの順序や見出し文字列は必要に応じて編集可能です。

## 5. コード側の主な編集ポイント
- `reporting.py` で各種グラフを生成しています。
  - `create_sentiment_pie_chart_base64` などの `figsize` を上記サイズに合わせます。
  - `generate_pdf_report` でテンプレートにデータを流し込んでいます。
- `analysis.py` の出力内容を変更したい場合は、モデル定義を編集します。

以上の方針に従うことで、用紙サイズやフォントを維持しつつレポートを拡張できます。
